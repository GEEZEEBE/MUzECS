// Do not edit this file; automatically generated by build.py.
"use strict";

Blockly.Arduino=new Blockly.Generator("Arduino");Blockly.Arduino.addReservedWords("setup,loop,if,else,for,switch,case,while,do,break,continue,return,goto,define,include,HIGH,LOW,INPUT,OUTPUT,INPUT_PULLUP,true,false,interger, constants,floating,point,void,bookean,char,unsigned,byte,int,word,long,float,double,string,String,array,static, volatile,const,sizeof,pinMode,digitalWrite,digitalRead,analogReference,analogRead,analogWrite,tone,noTone,shiftOut,shitIn,pulseIn,millis,micros,delay,delayMicroseconds,min,max,abs,constrain,map,pow,sqrt,sin,cos,tan,randomSeed,random,lowByte,highByte,bitRead,bitWrite,bitSet,bitClear,bit,attachInterrupt,detachInterrupt,interrupts,noInterrupts");
Blockly.Arduino.ORDER_ATOMIC=0;Blockly.Arduino.ORDER_UNARY_POSTFIX=1;Blockly.Arduino.ORDER_UNARY_PREFIX=2;Blockly.Arduino.ORDER_MULTIPLICATIVE=3;Blockly.Arduino.ORDER_ADDITIVE=4;Blockly.Arduino.ORDER_SHIFT=5;Blockly.Arduino.ORDER_RELATIONAL=6;Blockly.Arduino.ORDER_EQUALITY=7;Blockly.Arduino.ORDER_BITWISE_AND=8;Blockly.Arduino.ORDER_BITWISE_XOR=9;Blockly.Arduino.ORDER_BITWISE_OR=10;Blockly.Arduino.ORDER_LOGICAL_AND=11;Blockly.Arduino.ORDER_LOGICAL_OR=12;Blockly.Arduino.ORDER_CONDITIONAL=13;
Blockly.Arduino.ORDER_ASSIGNMENT=14;Blockly.Arduino.ORDER_NONE=99;var profile={arduino:{description:"Arduino standard-compatible board",digital:[["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"]],analog:[["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"]],serial:9600},arduino_mega:{description:"Arduino Mega-compatible board"}};
profile["default"]=profile.arduino;
Blockly.Arduino.init=function(b){Blockly.Arduino.definitions_=Object.create(null);Blockly.Arduino.setups_=Object.create(null);Blockly.Arduino.variableDB_?Blockly.Arduino.variableDB_.reset():Blockly.Arduino.variableDB_=new Blockly.Names(Blockly.Arduino.RESERVED_WORDS_);var a=[];b=Blockly.Variables.allVariables(b);for(var c=0;c<b.length;c++)a[c]="int "+Blockly.Arduino.variableDB_.getName(b[c],Blockly.Variables.NAME_TYPE)+";\n";Blockly.Arduino.definitions_.variables=a.join("\n")};
Blockly.Arduino.finish=function(b){b="  "+b.replace(/\n/g,"\n  ");b=b.replace(/\n\s+$/,"\n");b="void loop() \n{\n"+b+"\n}";var a=[],c=[],d;for(d in Blockly.Arduino.definitions_){var e=Blockly.Arduino.definitions_[d];e.match(/^#include/)?a.push(e):c.push(e)}e=[];for(d in Blockly.Arduino.setups_)e.push(Blockly.Arduino.setups_[d]);return(a.join("\n")+"\n\n"+c.join("\n")+"\nvoid setup() \n{\n  "+e.join("\n  ")+"\n}\n\n").replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n\n\n")+b};
Blockly.Arduino.scrubNakedValue=function(b){return b+";\n"};Blockly.Arduino.quote_=function(b){b=b.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/\$/g,"\\$").replace(/'/g,"\\'");return'"'+b+'"'};
Blockly.Arduino.scrub_=function(b,a){if(null===a)return"";var c="";if(!b.outputConnection||!b.outputConnection.targetConnection){var d=b.getCommentText();d&&(c+=Blockly.Arduino.prefixLines(d,"// ")+"\n");for(var e=0;e<b.inputList.length;e++)b.inputList[e].type==Blockly.INPUT_VALUE&&(d=b.inputList[e].connection.targetBlock())&&(d=Blockly.Arduino.allNestedComments(d))&&(c+=Blockly.Arduino.prefixLines(d,"// "))}e=b.nextConnection&&b.nextConnection.targetBlock();e=Blockly.Arduino.blockToCode(e);return c+
a+e};Blockly.Arduino.advancedPins={};
Blockly.Arduino.get_freq=function(b){var a="-1";switch(b){case '"C1"':a="33";break;case '"C1#"':a="35";break;case '"D1"':a="37";break;case '"D1#"':a="39";break;case '"E1"':a="41";break;case '"F1"':a="44";break;case '"F1#"':a="46";break;case '"G1"':a="49";break;case '"G1#"':a="52";break;case '"A1"':a="55";break;case '"A1#"':a="58";break;case '"B1"':a="62";break;case '"C2"':a="65";break;case '"C2#"':a="69";break;case '"D2"':a="73";break;case '"D2#"':a="78";break;case '"E2"':a="82";break;case '"F2"':a=
"87";break;case '"F2#"':a="93";break;case '"G2"':a="98";break;case '"G2#"':a="104";break;case '"A2"':a="110";break;case '"A2#"':a="117";break;case '"B2"':a="123";break;case '"C3"':a="131";break;case '"C3#"':a="139";break;case '"D3"':a="147";break;case '"D3#"':a="156";break;case '"E3"':a="165";break;case '"F3"':a="175";break;case '"F3#"':a="185";break;case '"G3"':a="196";break;case '"G3#"':a="208";break;case '"A3"':a="220";break;case '"A3#"':a="233";break;case '"B3"':a="247";break;case '"C"':a="262";
break;case '"C#"':a="277";break;case '"D"':a="294";break;case '"D#"':a="311";break;case '"E"':a="330";break;case '"F"':a="349";break;case '"F#"':a="370";break;case '"G"':a="392";break;case '"G#"':a="415";break;case '"A"':a="440";break;case '"A#"':a="466";break;case '"B"':a="494";break;case '"C4"':a="262";break;case '"C4#"':a="277";break;case '"D4"':a="294";break;case '"D4#"':a="311";break;case '"E4"':a="330";break;case '"F4"':a="349";break;case '"F4#"':a="370";break;case '"G4"':a="392";break;case '"G4#"':a=
"415";break;case '"A4"':a="440";break;case '"A4#"':a="466";break;case '"B4"':a="494";break;case '"C5"':a="523";break;case '"C5#"':a="554";break;case '"D5"':a="587";break;case '"D5#"':a="622";break;case '"E5"':a="659";break;case '"F5"':a="698";break;case '"F5#"':a="740";break;case '"G5"':a="784";break;case '"G5#"':a="831";break;case '"A5"':a="880";break;case '"A5#"':a="932";break;case '"B5"':a="988";break;case '"C6"':a="1047";break;case '"C6#"':a="1109";break;case '"D6"':a="1175";break;case '"D6#"':a=
"1245";break;case '"E6"':a="1319";break;case '"F6"':a="1397";break;case '"F6#"':a="1480";break;case '"G6"':a="1568";break;case '"G6#"':a="1661";break;case '"A6"':a="1760";break;case '"A6#"':a="1865";break;case '"B6"':a="1976";break;case '"C7"':a="2093";break;case '"C7#"':a="2217";break;case '"D7"':a="2349";break;case '"D7#"':a="2489";break;case '"E7"':a="2637";break;case '"F7"':a="2794";break;case '"F7#"':a="2960";break;case '"G7"':a="3136";break;case '"G7#"':a="3322";break;case '"A7"':a="3520";break;
case '"A7#"':a="3729";break;case '"B7"':a="3951";break;case '"C8"':a="4186";break;case '"C8#"':a="4435";break;case '"D8"':a="4699";break;case '"D8#"':a="4978";break;default:alert("unrecognized note used in this.\n\n\nHint: Please ask your teacher for a list of available note names.")}return a};
Blockly.Arduino.play_note_adv=function(){var b=Blockly.Arduino.valueToCode(this,"pin",Blockly.Arduino.ORDER_ATOMIC),a=Blockly.Arduino.valueToCode(this,"note",Blockly.Arduino.ORDER_ATOMIC),a=Blockly.Arduino.get_freq(a);""===b?(alert("Please add a pin number! Placed as 0 for now."),b="0"):null;return"tone("+b+", "+a+");\n"};
Blockly.Arduino.play_note_time_adv=function(){var b=Blockly.Arduino.valueToCode(this,"pin",Blockly.Arduino.ORDER_ATOMIC),a=Blockly.Arduino.valueToCode(this,"note",Blockly.Arduino.ORDER_ATOMIC),c=Blockly.Arduino.valueToCode(this,"milliseconds",Blockly.Arduino.ORDER_ATOMIC),a=Blockly.Arduino.get_freq(a);""===b?(alert("Please add a pin number! Placed as 0 for now."),b="0"):null;""===c?(alert("Please add a time in milliseconds! Placed as 0 for now."),c="0"):null;return"tone("+b+", "+a+", "+c+");\n"};
Blockly.Arduino.play_frequency_adv=function(){var b=Blockly.Arduino.valueToCode(this,"pin",Blockly.Arduino.ORDER_ATOMIC),a=Blockly.Arduino.valueToCode(this,"frequency",Blockly.Arduino.ORDER_ATOMIC);""===b?(alert("Please add a pin number! Placed as 0 for now."),b="0"):null;""===a?(alert("Please add a frequency! Placed as 0 for now."),a="0"):null;return"tone("+b+", "+a+");\n"};
Blockly.Arduino.play_frequency_time_adv=function(){var b=Blockly.Arduino.valueToCode(this,"pin",Blockly.Arduino.ORDER_ATOMIC),a=Blockly.Arduino.valueToCode(this,"frequency",Blockly.Arduino.ORDER_ATOMIC),c=Blockly.Arduino.valueToCode(this,"milliseconds",Blockly.Arduino.ORDER_ATOMIC);""===b?(alert("Please add a pin number! Placed as 0 for now."),b="0"):null;""===a?(alert("Please add a frequency! Placed as 0 for now."),a="0"):null;""===c?(alert("Please add a time in milliseconds! Placed as 0 for now."),
c="0"):null;return"tone("+b+", "+a+", "+c+");\n"};Blockly.Arduino.no_tone_adv=function(){var b=Blockly.Arduino.valueToCode(this,"pin",Blockly.Arduino.ORDER_ATOMIC);""===b?(alert("Please add a pin number! Placed as 0 for now."),b="0"):null;return"noTone("+b+");\n"};
Blockly.Arduino.turn_led_on_adv=function(){var b=Blockly.Arduino.valueToCode(this,"pin",Blockly.Arduino.ORDER_ATOMIC);""===b?(alert("Please add a pin number! Placed as 0 for now."),b="0"):null;Blockly.Arduino.setups_["setup_"+b+"_led"]="pinMode("+b+", OUTPUT);\n";return"digitalWrite("+b+", HIGH);\n"};
Blockly.Arduino.turn_led_off_adv=function(){var b=Blockly.Arduino.valueToCode(this,"pin",Blockly.Arduino.ORDER_ATOMIC);""===b?(alert("Please add a pin number! Placed as 0 for now."),b="0"):null;Blockly.Arduino.setups_["setup_"+b+"_led"]="pinMode("+b+", OUTPUT);\n";return"digitalWrite("+b+", LOW);\n"};
Blockly.Arduino.button_pressed_adv=function(){var b=Blockly.Arduino.valueToCode(this,"pin",Blockly.Arduino.ORDER_ATOMIC);""===b?(alert("Please add a pin number! Placed as 0 for now."),b="0"):null;Blockly.Arduino.setups_["setup_pin_"+b]="pinMode("+b+", INPUT);";return["digitalRead("+b+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.digital_adv=function(){var b=Blockly.Arduino.valueToCode(this,"pin",Blockly.Arduino.ORDER_ATOMIC);""===b?(alert("Please add a pin number! Placed as 0 for now."),b="0"):null;Blockly.Arduino.setups_["setup_pin_"+b]="pinMode("+b+", INPUT);";return["digitalRead("+b+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.set_digital_adv=function(){var b=Blockly.Arduino.valueToCode(this,"pin",Blockly.Arduino.ORDER_ATOMIC),a=this.getFieldValue("voltage");""===b?(alert("Please add a pin number! Placed as 0 for now."),b="0"):null;Blockly.Arduino.setups_["setup_pin_"+b]="pinMode("+b+", INPUT);";return"digitalWrite("+b+", "+a+")"};
Blockly.Arduino.analog_adv=function(){var b=Blockly.Arduino.valueToCode(this,"pin",Blockly.Arduino.ORDER_ATOMIC);""===b?(alert("Please add a pin number! Placed as 0 for now."),b="0"):null;return["analogRead("+b+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.set_analog_adv=function(){var b=Blockly.Arduino.valueToCode(this,"pin",Blockly.Arduino.ORDER_ATOMIC),a=Blockly.Arduino.valueToCode(this,"analog",Blockly.Arduino.ORDER_ATOMIC);""===b?(alert("Please add a pin number! Placed as 0 for now."),b="0"):null;return"analogWrite("+b+", "+a+");"};Blockly.Arduino.ecs={};
Blockly.Arduino.get_freq=function(b){var a="-1";switch(b){case '"C1"':a="33";break;case '"C1#"':a="35";break;case '"D1"':a="37";break;case '"D1#"':a="39";break;case '"E1"':a="41";break;case '"F1"':a="44";break;case '"F1#"':a="46";break;case '"G1"':a="49";break;case '"G1#"':a="52";break;case '"A1"':a="55";break;case '"A1#"':a="58";break;case '"B1"':a="62";break;case '"C2"':a="65";break;case '"C2#"':a="69";break;case '"D2"':a="73";break;case '"D2#"':a="78";break;case '"E2"':a="82";break;case '"F2"':a=
"87";break;case '"F2#"':a="93";break;case '"G2"':a="98";break;case '"G2#"':a="104";break;case '"A2"':a="110";break;case '"A2#"':a="117";break;case '"B2"':a="123";break;case '"C3"':a="131";break;case '"C3#"':a="139";break;case '"D3"':a="147";break;case '"D3#"':a="156";break;case '"E3"':a="165";break;case '"F3"':a="175";break;case '"F3#"':a="185";break;case '"G3"':a="196";break;case '"G3#"':a="208";break;case '"A3"':a="220";break;case '"A3#"':a="233";break;case '"B3"':a="247";break;case '"C"':a="262";
break;case '"C#"':a="277";break;case '"D"':a="294";break;case '"D#"':a="311";break;case '"E"':a="330";break;case '"F"':a="349";break;case '"F#"':a="370";break;case '"G"':a="392";break;case '"G#"':a="415";break;case '"A"':a="440";break;case '"A#"':a="466";break;case '"B"':a="494";break;case '"C4"':a="262";break;case '"C4#"':a="277";break;case '"D4"':a="294";break;case '"D4#"':a="311";break;case '"E4"':a="330";break;case '"F4"':a="349";break;case '"F4#"':a="370";break;case '"G4"':a="392";break;case '"G4#"':a=
"415";break;case '"A4"':a="440";break;case '"A4#"':a="466";break;case '"B4"':a="494";break;case '"C5"':a="523";break;case '"C5#"':a="554";break;case '"D5"':a="587";break;case '"D5#"':a="622";break;case '"E5"':a="659";break;case '"F5"':a="698";break;case '"F5#"':a="740";break;case '"G5"':a="784";break;case '"G5#"':a="831";break;case '"A5"':a="880";break;case '"A5#"':a="932";break;case '"B5"':a="988";break;case '"C6"':a="1047";break;case '"C6#"':a="1109";break;case '"D6"':a="1175";break;case '"D6#"':a=
"1245";break;case '"E6"':a="1319";break;case '"F6"':a="1397";break;case '"F6#"':a="1480";break;case '"G6"':a="1568";break;case '"G6#"':a="1661";break;case '"A6"':a="1760";break;case '"A6#"':a="1865";break;case '"B6"':a="1976";break;case '"C7"':a="2093";break;case '"C7#"':a="2217";break;case '"D7"':a="2349";break;case '"D7#"':a="2489";break;case '"E7"':a="2637";break;case '"F7"':a="2794";break;case '"F7#"':a="2960";break;case '"G7"':a="3136";break;case '"G7#"':a="3322";break;case '"A7"':a="3520";break;
case '"A7#"':a="3729";break;case '"B7"':a="3951";break;case '"C8"':a="4186";break;case '"C8#"':a="4435";break;case '"D8"':a="4699";break;case '"D8#"':a="4978";break;default:alert("unrecognized note used in block.\n\n\nHint: Please ask your teacher for a list of available note names.")}return a};Blockly.Arduino.play_note=function(){var b=Blockly.Arduino.valueToCode(this,"note",Blockly.Arduino.ORDER_ATOMIC),b=Blockly.Arduino.get_freq(b);return"tone(11, "+b+");\n"};
Blockly.Arduino.play_note_time=function(){var b=Blockly.Arduino.valueToCode(this,"note",Blockly.Arduino.ORDER_ATOMIC),a=Blockly.Arduino.valueToCode(this,"milliseconds",Blockly.Arduino.ORDER_ATOMIC),b=Blockly.Arduino.get_freq(b);""===a?(alert("Please add a time in milliseconds! Placed as 0 for now."),a="0"):null;return"tone(11, "+b+", "+a+");\n"};
Blockly.Arduino.button_pressed=function(){var b;switch(Blockly.Arduino.valueToCode(this,"button",Blockly.Arduino.ORDER_ATOMIC)){case "1":Blockly.Arduino.setups_.setup_pin_6="pinMode(6, INPUT);";b=6;break;case "2":Blockly.Arduino.setups_.setup_pin_8="pinMode(8, INPUT);";b=8;break;case "3":Blockly.Arduino.setups_.setup_pin_10="pinMode(10, INPUT);";b=10;break;case "4":Blockly.Arduino.setups_.setup_pin_12="pinMode(12, INPUT);";b=12;break;default:alert("invalid button used in block.\n\n\nHint: Valid button numbers are 1-4.")}return["digitalRead("+
b+")",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.play_frequency=function(){var b=Blockly.Arduino.valueToCode(this,"frequency",Blockly.Arduino.ORDER_ATOMIC);""===b?(alert("Please add a frequency! Placed as 0 for now."),b="0"):null;return"tone(11, "+b+");\n"};
Blockly.Arduino.play_frequency_time=function(){var b=Blockly.Arduino.valueToCode(this,"frequency",Blockly.Arduino.ORDER_ATOMIC),a=Blockly.Arduino.valueToCode(this,"milliseconds",Blockly.Arduino.ORDER_ATOMIC);""===b?(alert("Please add a time in frequency! Placed as 0 for now."),b="0"):null;""===a?(alert("Please add a time in milliseconds! Placed as 0 for now."),a="0"):null;return"tone(11, "+b+", "+a+");\n"};Blockly.Arduino.no_tone=function(){return"noTone(11);\n"};
Blockly.Arduino.turn_led_1_on=function(){Blockly.Arduino.setups_.setup_red_led="pinMode(5, OUTPUT);\n";return"digitalWrite(5, HIGH);\n"};Blockly.Arduino.turn_led_1_off=function(){Blockly.Arduino.setups_.setup_red_led="pinMode(5, OUTPUT);\n";return"digitalWrite(5, LOW);\n"};Blockly.Arduino.turn_led_2_on=function(){Blockly.Arduino.setups_.setup_orange_led="pinMode(7, OUTPUT);\n";return"digitalWrite(7, HIGH);\n"};
Blockly.Arduino.turn_led_2_off=function(){Blockly.Arduino.setups_.setup_orange_led="pinMode(7, OUTPUT);\n";return"digitalWrite(7, LOW);\n"};Blockly.Arduino.turn_led_3_on=function(){Blockly.Arduino.setups_.setup_yellow_led="pinMode(9, OUTPUT);\n";return"digitalWrite(9, HIGH);\n"};Blockly.Arduino.turn_led_3_off=function(){Blockly.Arduino.setups_.setup_yellow_led="pinMode(9, OUTPUT);\n";return"digitalWrite(9, LOW);\n"};
Blockly.Arduino.turn_led_4_on=function(){Blockly.Arduino.setups_.setup_green_led="pinMode(13, OUTPUT);\n";return"digitalWrite(13, HIGH);\n"};Blockly.Arduino.turn_led_4_off=function(){Blockly.Arduino.setups_.setup_green_led="pinMode(13, OUTPUT);\n";return"digitalWrite(13, LOW);\n"};Blockly.Arduino.set_up_keyboard=function(){Blockly.Arduino.definitions_.var_keysDown_read="boolean keysDown[36];\n";return""};
Blockly.Arduino.update_keyboard=function(){Blockly.Arduino.definitions_.vars_ecs_reads="int ECSindex;\nint ECSnumAvailable;\nint ECSiteration;\n";return"ECSnumAvailable = Serial.available();\nchar buffer[ECSnumAvailable];\nSerial.readBytes(buffer, ECSnumAvailable);\nfor (ECSiteration = 0; ECSiteration < ( ECSnumAvailable ); ++ECSiteration)\n{\n\tECSindex = buffer[ECSiteration];\n\tkeysDown[ECSindex] = !keysDown[ECSindex];\n}\n"};
Blockly.Arduino.key_pressed=function(){var b=Blockly.Arduino.valueToCode(this,"key",Blockly.Arduino.ORDER_ATOMIC),a;3==b.length&&(b=b.charAt(1),47<b.charCodeAt()&&58>b.charCodeAt()?a=b.charCodeAt()-48:96<b.charCodeAt()&&123>b.charCodeAt()&&(a=b.charCodeAt()-97+10));null==a&&alert("unrecognized key used in block.\n\n\nHiny: Valid keys are a-z and 0-9.");return["keysDown["+a+"]",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.get_distance=function(){Blockly.Arduino.definitions_.func_smoothDistance="int smoothDistance()\n{\n  int count = 0;\n  long avg = 0;\n  int dist = 0;\n  while (count < 4) {\n    dist = getDistance();    avg = (avg + dist)/2;\n    count = count + 1;\n  }\n  if (count == 4) {\n    count = 0;\n  }\n  Serial.println(avg, DEC);\n  return (int)avg;\n}\n";Blockly.Arduino.definitions_["func_getDistance()"]="int getDistance()\n{\n unsigned long start = micros();\n int CYCLES = 4;\n int DELAY_PING = 25;\n int timeout = 16000;\n int T1OUT = 0x10;\n \n for (int ii = 0; ii < CYCLES; ii++) {\n   digitalWrite(2, HIGH);\n   digitalWrite(3, LOW);\n   delayMicroseconds(DELAY_PING);\n   digitalWrite(2, LOW);\n   digitalWrite(3, HIGH);\n   delayMicroseconds(DELAY_PING);\n }\n \n delayMicroseconds(200);\n while((PIND & T1OUT) != 0 && timeout > 0) {\n   timeout--;\n   delayMicroseconds(1);\n }\n unsigned long end = micros();\n unsigned long time;\n if (end > start) {\n   time = end - start;\n }\n else {\n   time = (end + ~start) - (start + ~start);\n }\n\n delayMicroseconds(400000);\n return ((int) time);\n}\n";
Blockly.Arduino.setups_.setup_dist_1="Serial.begin(9600);\n";Blockly.Arduino.setups_.setup_dist_2="pinMode(3, OUTPUT);\n";Blockly.Arduino.setups_.setup_dist_3="pinMode(2, OUTPUT);\n";return["smoothDistance()",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.grove={};Blockly.Arduino.grove_led=function(){var b=this.getFieldValue("PIN"),a=this.getFieldValue("STAT");Blockly.Arduino.setups_["setup_green_led_"+b]="pinMode("+b+", OUTPUT);";return"digitalWrite("+b+","+a+");\n"};Blockly.Arduino.grove_led2=function(){var b=this.getFieldValue("PIN"),a=this.getFieldValue("STAT");Blockly.Arduino.setups_["setup_green_led_"+b]="pinMode("+b+", OUTPUT);";return"digitalWrite("+b+","+a+");\n"};
Blockly.Arduino.grove_button=function(){var b=this.getFieldValue("PIN");Blockly.Arduino.setups_["setup_button_"+b]="pinMode("+b+", INPUT);";return["digitalRead("+b+")",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.grove_rotary_angle=function(){return["analogRead("+this.getFieldValue("PIN")+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.grove_tilt_switch=function(){var b=this.getFieldValue("PIN");Blockly.Arduino.setups_["setup_tilt_switch_"+b]="pinMode("+b+", INPUT);";return["digitalRead("+b+")",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.grove_piezo_buzzer=function(){var b=this.getFieldValue("PIN"),a=this.getFieldValue("STAT");Blockly.Arduino.setups_["setup_piezo_buzzer_"+b]="pinMode("+b+", OUTPUT);";return"digitalWrite("+b+","+a+");\n"};
Blockly.Arduino.grove_relay=function(){var b=this.getFieldValue("PIN"),a=this.getFieldValue("STAT");Blockly.Arduino.setups_["setup_relay_"+b]="pinMode("+b+", OUTPUT);";return"digitalWrite("+b+","+a+");\n"};Blockly.Arduino.grove_temporature_sensor=function(){var b=this.getFieldValue("PIN");return["round((1/(log((float)(1023-analogRead("+b+"))*10000/analogRead("+b+"))/10000)/3975+1/298.15)-273.15)",Blockly.Arduino.ORDER_ATOMIC]};
var _get_next_pin=function(b){var a=b,a=parseInt(a)?parseInt(b)+1:"A"+(parseInt(a.slice(1,a.length))+1);b=profile["default"].digital.length;for(var c=!0,d=0;d<b;d++)profile["default"].digital[d][1]==a&&(c=!1);return c?(alert("Grove Sensor needs PIN#+1 port, current setting is out of bound."),null):a};
Blockly.Arduino.grove_serial_lcd_print=function(){var b=this.getFieldValue("PIN"),a=Blockly.Arduino.valueToCode(this,"TEXT",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"''",c=Blockly.Arduino.valueToCode(this,"TEXT2",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"''",d=Blockly.Arduino.valueToCode(this,"DELAY_TIME",Blockly.Arduino.ORDER_ATOMIC)||"1000";Blockly.Arduino.definitions_.define_seriallcd="#include <SerialLCD.h>\n";Blockly.Arduino.definitions_.define_softwareserial="#include <SoftwareSerial.h>\n";var e=
_get_next_pin(b);Blockly.Arduino.definitions_["var_lcd_"+b]="SerialLCD slcd_"+b+"("+b+","+e+");\n";Blockly.Arduino.setups_["setup_lcd_"+b]="slcd_"+b+".begin();\n";e="slcd_"+b+".backlight();\n"+("slcd_"+b+".setCursor(0,0);\n");e+="slcd_"+b+".print("+a+");\n";e+="slcd_"+b+".setCursor(0,1);\n";e+="slcd_"+b+".print("+c+");\n";return e+="delay("+d+");\n"};
Blockly.Arduino.grove_serial_lcd_power=function(){var b=this.getFieldValue("PIN"),a=this.getFieldValue("STAT");Blockly.Arduino.definitions_.define_seriallcd="#include <SerialLCD.h>\n";Blockly.Arduino.definitions_.define_softwareserial="#include <SoftwareSerial.h>\n";var c=_get_next_pin(b);Blockly.Arduino.definitions_["var_lcd"+b]="SerialLCD slcd_"+b+"("+b+","+c+");\n";b="slcd_"+b;return"ON"===a?b+".Power();\n":b+".noPower();\n"};
Blockly.Arduino.grove_serial_lcd_effect=function(){var b=this.getFieldValue("PIN"),a=this.getFieldValue("STAT");Blockly.Arduino.definitions_.define_seriallcd="#include <SerialLCD.h>\n";Blockly.Arduino.definitions_.define_softwareserial="#include <SoftwareSerial.h>\n";var c=_get_next_pin(b);Blockly.Arduino.definitions_["var_lcd"+b]="SerialLCD slcd_"+b+"("+b+","+c+");\n";b="slcd_"+b;return"LEFT"===a?b+".scrollDisplayLeft();\n":"RIGHT"===a?b+".scrollDisplayRight();\n":b+".autoscroll();\n"};
Blockly.Arduino.grove_sound_sensor=function(){return["analogRead("+this.getFieldValue("PIN")+")",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.grove_pir_motion_sensor=function(){var b=this.getFieldValue("PIN");Blockly.Arduino.setups_["setup_input_"+b]="pinMode("+b+", INPUT);";return["digitalRead("+b+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.grove_line_finder=function(){var b=this.getFieldValue("PIN");Blockly.Arduino.setups_["setup_input_"+b]="pinMode("+b+", INPUT);";return["digitalRead("+b+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.grove_ultrasonic_ranger=function(){var b=this.getFieldValue("PIN"),a=this.getFieldValue("UNIT");Blockly.Arduino.definitions_.define_ultrasonic="#include <Ultrasonic.h>\n";Blockly.Arduino.definitions_["var_ultrasonic"+b]="Ultrasonic ultrasonic_"+b+"("+b+");\n";"cm"===a?(Blockly.Arduino.setups_["setup_ultrasonic_"+b]="ultrasonic_"+b+".MeasureInCentimeters();",b="ultrasonic_"+b+".RangeInCentimeters();"):(Blockly.Arduino.setups_["setup_ultrasonic_"+b]="ultrasonic_"+b+".MeasureInInches();",
b="ultrasonic_"+b+".RangeInInches();");return[b,Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.grove_motor_shield=function(){var b=this.getFieldValue("DIRECTION");Blockly.Arduino.setups_.setup_motor="pinMode(8,OUTPUT);//I1\n  pinMode(11,OUTPUT);//I2\n  pinMode(9,OUTPUT);//speedPinA\n  pinMode(12,OUTPUT);//I3\n  pinMode(13,OUTPUT);//i4\n  pinMode(10,OUTPUT);//speedPinB\n";var a="";"forward"===b?(Blockly.Arduino.definitions_.define_forward="void forward()\n{\n  analogWrite(9,127);//input a simulation value to set the speed\n  analogWrite(10,127);\n  digitalWrite(13,HIGH);//turn DC Motor B move clockwise\n  digitalWrite(12,LOW);\n  digitalWrite(11,LOW);//turn DC Motor A move anticlockwise\n  digitalWrite(8,HIGH);\n}\n",a=
"forward();\n"):"right"===b?(Blockly.Arduino.definitions_.define_right="void right()\n{\n  analogWrite(9,127);//input a simulation value to set the speed\n  analogWrite(10,127);\n  digitalWrite(13,LOW);//turn DC Motor B move anticlockwise\n  digitalWrite(12,HIGH);\n  digitalWrite(11,LOW);//turn DC Motor A move anticlockwise\n  digitalWrite(8,HIGH);\n}\n\n",a="right();\n"):"left"===b?(Blockly.Arduino.definitions_.define_left="void left()\n{\n  analogWrite(9,127);//input a simulation value to set the speed\n  analogWrite(10,127);\n  digitalWrite(13,HIGH);//turn DC Motor B move clockwise\n  digitalWrite(12,LOW);\n  digitalWrite(11,HIGH);//turn DC Motor A move clockwise\n  digitalWrite(8,LOW);\n}\n\n",
a="left();\n"):"backward"===b?(Blockly.Arduino.definitions_.define_backward="void backward()\n{\n  analogWrite(9,127);//input a simulation value to set the speed\n  analogWrite(10,127);\n  digitalWrite(13,LOW);//turn DC Motor B move anticlockwise\n  digitalWrite(12,HIGH);\n  digitalWrite(11,HIGH);//turn DC Motor A move clockwise\n  digitalWrite(8,LOW);\n}\n\n",a="backward();\n"):"stop"===b&&(Blockly.Arduino.definitions_.define_stop="void stop()\n{\ndigitalWrite(9,LOW);// Unenble the pin, to stop the motor. this should be done to avid damaging the motor.\ndigitalWrite(10,LOW);\ndelay(1000);\n}\n\n",
a="stop();\n");return a};Blockly.Arduino.grove_thumb_joystick=function(){var b=this.getFieldValue("PIN"),a="0",a="y"===this.getFieldValue("AXIS")?_get_next_pin(b):b;return["analogRead("+a+")",Blockly.Arduino.ORDER_ATOMIC]};function hexToR(b){return parseInt(cutHex(b).substring(0,2),16)}function hexToG(b){return parseInt(cutHex(b).substring(2,4),16)}function hexToB(b){return parseInt(cutHex(b).substring(4,6),16)}function cutHex(b){return"#"==b.charAt(0)?b.substring(1,7):b}
Blockly.Arduino.grove_rgb_led=function(){var b=this.getFieldValue("PIN"),a=_get_next_pin(b);Blockly.Arduino.setups_["setup_input_"+b]="pinMode("+b+", OUTPUT);";Blockly.Arduino.setups_["setup_input_"+a]="pinMode("+a+", OUTPUT);";Blockly.Arduino.definitions_.define_uint8="#define uint8 unsigned char";Blockly.Arduino.definitions_.define_uint16="#define uint16 unsigned int";Blockly.Arduino.definitions_.define_uint32="#define uint32 unsigned long int";Blockly.Arduino.definitions_["define_clkproduce_"+
b]="void ClkProduce_"+b+"(void)\n{\n  digitalWrite("+b+", LOW);\n  delayMicroseconds(20);\n  digitalWrite("+b+", HIGH);\n  delayMicroseconds(20);\n}\n";Blockly.Arduino.definitions_["define_send32zero_"+b]="void Send32Zero_"+b+"(void)\n{\n  uint8 i;\n  for (i=0; i<32; i++)\n  {\n    digitalWrite("+a+", LOW);\n    ClkProduce_"+b+"();\n  }\n}\n";Blockly.Arduino.definitions_.define_taskanticode="uint8 TakeAntiCode(uint8 dat)\n{\n  uint8 tmp = 0;\n  if ((dat & 0x80) == 0)\n  {\n    tmp |= 0x02;\n  }\n  \n  if ((dat & 0x40) == 0)\n  {\n    tmp |= 0x01;\n  }\n  return tmp;\n}\n";
Blockly.Arduino.definitions_["define_datasend_"+b]="// gray data\nvoid DatSend_"+b+"(uint32 dx)\n{\n  uint8 i;\n  for (i=0; i<32; i++)\n  {\n    if ((dx & 0x80000000) != 0)\n    {\n      digitalWrite("+a+", HIGH);\n    }\n    else\n    {\n      digitalWrite("+a+", LOW);\n    }\n  dx <<= 1;\n  ClkProduce_"+b+"();\n  }\n}\n";Blockly.Arduino.definitions_["define_datadealwithsend_"+b]="// data processing\nvoid DataDealWithAndSend_"+b+"(uint8 r, uint8 g, uint8 b)\n{\n  uint32 dx = 0;\n  dx |= (uint32)0x03 << 30;             // highest two bits 1\uff0cflag bits\n  dx |= (uint32)TakeAntiCode(b) << 28;\n  dx |= (uint32)TakeAntiCode(g) << 26;\n  dx |= (uint32)TakeAntiCode(r) << 24;\n\n  dx |= (uint32)b << 16;\n  dx |= (uint32)g << 8;\n  dx |= r;\n\n  DatSend_"+
b+"(dx);\n}\n";a="Send32Zero_"+b+"(); // begin\n";if(0==this.itemCount_)return"";for(var c=0;c<this.itemCount_;c++)var d=this.getFieldValue("RGB"+c),a=a+("DataDealWithAndSend_"+b+"("+hexToR(d)+", "+hexToG(d)+", "+hexToB(d)+"); // first node data\n");return a+("Send32Zero_"+b+"();  // send to update data\n")};
Blockly.Arduino.grove_bluetooth_slave=function(){var b=this.getFieldValue("PIN"),a=_get_next_pin(b),c=this.getFieldValue("NAME");this.getFieldValue("PINCODE");var d=Blockly.Arduino.statementToCode(this,"RCV"),e=Blockly.Arduino.statementToCode(this,"SNT");Blockly.Arduino.definitions_.define_softwareserial="#include <SoftwareSerial.h>\n";Blockly.Arduino.definitions_["var_bluetooth_"+b]="SoftwareSerial blueToothSerial_"+b+"("+b+","+a+");\n";Blockly.Arduino.setups_["setup_bluetooth_"+b]="Serial.begin(9600);\n";
Blockly.Arduino.setups_["setup_bluetooth_"+b]+="  pinMode("+b+", INPUT);\n";Blockly.Arduino.setups_["setup_bluetooth_"+b]+="  pinMode("+a+", OUTPUT);\n";Blockly.Arduino.setups_["setup_bluetooth_"+b]+="  setupBlueToothConnection_"+b+"();\n";Blockly.Arduino.definitions_["define_setupBlueToothConnection_"+b]="void setupBlueToothConnection_"+b+"()\n{\n  blueToothSerial_"+b+".begin(38400); //Set BluetoothBee BaudRate to default baud rate 38400\n  blueToothSerial_"+b+'.print("\\r\\n+STWMOD=0\\r\\n"); //set the bluetooth work in slave mode\n  blueToothSerial_'+
b+'.print("\\r\\n+STNA='+c+'\\r\\n"); //set the bluetooth name as "'+c+'"\n  blueToothSerial_'+b+'.print("\\r\\n+STPIN=0000\\r\\n");//Set SLAVE pincode"0000"\n  blueToothSerial_'+b+'.print("\\r\\n+STOAUT=1\\r\\n"); // Permit Paired device to connect me\n  blueToothSerial_'+b+'.print("\\r\\n+STAUTO=0\\r\\n"); // Auto-connection should be forbidden here\n  delay(2000); // This delay is required.\n  blueToothSerial_'+b+'.print("\\r\\n+INQ=1\\r\\n"); //make the slave bluetooth inquirable \n  Serial.println("The slave bluetooth is inquirable!");\n  delay(2000); // This delay is required.\n  blueToothSerial_'+
b+".flush();\n}\n";return"char recvChar_"+b+";\nwhile(1) {\n  if(blueToothSerial_"+b+".available()) {//check if there is any data sent from the remote bluetooth shield\n    recvChar_"+b+" = blueToothSerial_"+b+".read();\n    Serial.print(recvChar_"+b+");\n"+d+"  }\n  if(Serial.available()){//check if there is any data sent from the local serial terminal, you can add the other applications here\n    recvChar_"+b+" = Serial.read();\n    blueToothSerial_"+b+".print(recvChar_"+b+");\n"+e+"  }\n}\n"};Blockly.Arduino.procedures={};
Blockly.Arduino.procedures_defreturn=function(){var b=Blockly.Arduino.variableDB_.getName(this.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),a=Blockly.Arduino.statementToCode(this,"STACK");Blockly.Arduino.INFINITE_LOOP_TRAP&&(a=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+a);var c=Blockly.Arduino.valueToCode(this,"RETURN",Blockly.Arduino.ORDER_NONE)||"";c&&(c="  return "+c+";\n");for(var d=c?"Dynamic":"void",e=[],f=0;f<this.arguments_.length;f++)e[f]=Blockly.Arduino.variableDB_.getName(this.arguments_[f],
Blockly.Variables.NAME_TYPE);a=d+" "+b+"("+e.join(", ")+") {\n"+a+c+"}\n";a=Blockly.Arduino.scrub_(this,a);Blockly.Arduino.definitions_[b]=a;return null};Blockly.Arduino.procedures_defnoreturn=Blockly.Arduino.procedures_defreturn;
Blockly.Arduino.procedures_callreturn=function(){for(var b=Blockly.Arduino.variableDB_.getName(this.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),a=[],c=0;c<this.arguments_.length;c++)a[c]=Blockly.Arduino.valueToCode(this,"ARG"+c,Blockly.Arduino.ORDER_NONE)||"null";return[b+"("+a.join(", ")+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]};
Blockly.Arduino.procedures_callnoreturn=function(){for(var b=Blockly.Arduino.variableDB_.getName(this.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),a=[],c=0;c<this.arguments_.length;c++)a[c]=Blockly.Arduino.valueToCode(this,"ARG"+c,Blockly.Arduino.ORDER_NONE)||"null";return b+"("+a.join(", ")+");\n"};
Blockly.Arduino.procedures_ifreturn=function(){var b="if ("+(Blockly.Arduino.valueToCode(this,"CONDITION",Blockly.Arduino.ORDER_NONE)||"false")+") {\n";if(this.hasReturnValue_)var a=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_NONE)||"null",b=b+("  return "+a+";\n");else b+="  return;\n";return b+"}\n"};Blockly.Arduino.base={};Blockly.Arduino.base_delay=function(){return"delay("+(Blockly.Arduino.valueToCode(this,"DELAY_TIME",Blockly.Arduino.ORDER_ATOMIC)||"1000")+");\n"};Blockly.Arduino.base_map=function(){var b=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_NONE),a=Blockly.Arduino.valueToCode(this,"DMAX",Blockly.Arduino.ORDER_ATOMIC);return["map("+b+", 0, 1024, 0, "+a+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.inout_buildin_led=function(){var b=this.getFieldValue("STAT");Blockly.Arduino.setups_.setup_output_13="pinMode(13, OUTPUT);";return"digitalWrite(13, "+b+");\n"};Blockly.Arduino.inout_digital_write=function(){var b=this.getFieldValue("PIN"),a=this.getFieldValue("STAT");Blockly.Arduino.setups_["setup_output_"+b]="pinMode("+b+", OUTPUT);";return"digitalWrite("+b+", "+a+");\n"};
Blockly.Arduino.inout_digital_read=function(){var b=this.getFieldValue("PIN");Blockly.Arduino.setups_["setup_input_"+b]="pinMode("+b+", INPUT);";return["digitalRead("+b+")",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.inout_analog_write=function(){var b=this.getFieldValue("PIN"),a=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_ATOMIC);return"analogWrite("+b+", "+a+");\n"};Blockly.Arduino.inout_analog_read=function(){return["analogRead("+this.getFieldValue("PIN")+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.inout_highlow=function(){return["HIGH"==this.getFieldValue("BOOL")?"HIGH":"LOW",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.servo_move=function(){var b=this.getFieldValue("PIN"),a=Blockly.Arduino.valueToCode(this,"DEGREE",Blockly.Arduino.ORDER_ATOMIC),c=Blockly.Arduino.valueToCode(this,"DELAY_TIME",Blockly.Arduino.ORDER_ATOMIC)||"1000";Blockly.Arduino.definitions_.define_servo="#include <Servo.h>\n";Blockly.Arduino.definitions_["var_servo"+b]="Servo servo_"+b+";\n";Blockly.Arduino.setups_["setup_servo_"+b]="servo_"+b+".attach("+b+");\n";return"servo_"+b+".write("+a+");\ndelay("+c+");\n"};
Blockly.Arduino.servo_read_degrees=function(){var b=this.getFieldValue("PIN");Blockly.Arduino.definitions_.define_servo="#include &lt;Servo.h&gt;\n";Blockly.Arduino.definitions_["var_servo"+b]="Servo servo_"+b+";\n";Blockly.Arduino.setups_["setup_servo_"+b]="servo_"+b+".attach("+b+");\n";return"servo_"+b+".read()"};
Blockly.Arduino.serial_print=function(){var b=Blockly.Arduino.valueToCode(this,"CONTENT",Blockly.Arduino.ORDER_ATOMIC)||"0";Blockly.Arduino.setups_["setup_serial_"+profile["default"].serial]="Serial.begin("+profile["default"].serial+");\n";return"Serial.print("+b+');\nSerial.print("\\t");\n'};Blockly.Arduino.loops={};Blockly.Arduino.delay_micro=function(){return"delayMicroseconds("+(Blockly.Arduino.valueToCode(this,"DELAY_TIME",Blockly.Arduino.ORDER_ATOMIC)||"1000")+");\n"};
Blockly.Arduino.controls_for=function(){var b=Blockly.Arduino.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),a=Blockly.Arduino.valueToCode(this,"FROM",Blockly.Arduino.ORDER_ASSIGNMENT)||"0",c=Blockly.Arduino.valueToCode(this,"TO",Blockly.Arduino.ORDER_ASSIGNMENT)||"0",d=Blockly.Arduino.statementToCode(this,"DO");Blockly.Arduino.INFINITE_LOOP_TRAP&&(d=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+d);if(a.match(/^-?\d+(\.\d+)?$/)&&c.match(/^-?\d+(\.\d+)?$/))var e=
parseFloat(a)<=parseFloat(c),d="for ("+b+" = "+a+"; "+b+(e?" <= ":" >= ")+c+"; "+b+(e?"++":"--")+") {\n"+d+"}\n";else d="",e=a,a.match(/^\w+$/)||a.match(/^-?\d+(\.\d+)?$/)||(e=Blockly.Arduino.variableDB_.getDistinctName(b+"_start",Blockly.Variables.NAME_TYPE),d+="int "+e+" = "+a+";\n"),a=c,c.match(/^\w+$/)||c.match(/^-?\d+(\.\d+)?$/)||(a=Blockly.Arduino.variableDB_.getDistinctName(b+"_end",Blockly.Variables.NAME_TYPE),d+="int "+a+" = "+c+";\n"),d+="for ("+b+" = "+e+";\n    ("+e+" <= "+a+") ? "+b+
" <= "+a+" : "+b+" >= "+a+";\n    "+b+" += ("+e+" <= "+a+") ? 1 : -1) {\n"+branch0+"}\n";return d};Blockly.Arduino.controls_repeat=function(){var b=this.getFieldValue("TIMES");Blockly.Arduino.definitions_.index_i="int i;\n";var a=Blockly.Arduino.statementToCode(this,"DO");return"for (i = 1; i <= "+b+"; i++ ) {\n"+a+"\n}\n"};
Blockly.Arduino.controls_whileUntil=function(){var b=this.getFieldValue("MODE"),a=Blockly.Arduino.valueToCode(this,"BOOL",Blockly.Arduino.ORDER_NONE),c=Blockly.Arduino.statementToCode(this,"DO");return("WHILE"===b?"while ("+a+") {\n"+c+"\n}":"while (!"+a+") {\n"+c+"\n}")+"\n"};Blockly.Arduino.controls_infloop=function(){return"while ( true ) {\n"+Blockly.Arduino.statementToCode(this,"DO")+"\n}\n"};Blockly.Arduino.communications={};Blockly.Arduino.serial_print=function(){var b=Blockly.Arduino.valueToCode(this,"message2",Blockly.Arduino.ORDER_ATOMIC);Blockly.Arduino.valueToCode(this,"BOOL",Blockly.Arduino.ORDER_ATOMIC);b="Serial.print("+b+');\nSerial.print(" ");\n';return b+="Serial.println();\n"};Blockly.Arduino.texts={};Blockly.Arduino.text=function(){return[Blockly.Arduino.quote_(this.getFieldValue("TEXT")),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.text_concat=function(){var b=Blockly.Arduino.quote_(this.getFieldValue("TEXT1")),a=Blockly.Arduino.valueToCode(this,"TEXT2",Blockly.Arduino.ORDER_ATOMIC),b=b.substring(0,b.length-1),a=a.substring(1);return[b+a,Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.logic={};
Blockly.Arduino.controls_if=function(){for(var b=0,a=Blockly.Arduino.valueToCode(this,"IF"+b,Blockly.Arduino.ORDER_NONE)||"false",c=Blockly.Arduino.statementToCode(this,"DO"+b),d="if ("+a+") {\n"+c+"\n}",b=1;b<=this.elseifCount_;b++)a=Blockly.Arduino.valueToCode(this,"IF"+b,Blockly.Arduino.ORDER_NONE)||"false",c=Blockly.Arduino.statementToCode(this,"DO"+b),d+=" else if ("+a+") {\n"+c+"}";this.elseCount_&&(c=Blockly.Arduino.statementToCode(this,"ELSE"),d+=" else {\n"+c+"\n}");return d+"\n"};
Blockly.Arduino.logic_compare=function(){var b=this.getFieldValue("OP"),b=Blockly.Arduino.logic_compare.OPERATORS[b],a="=="==b||"!="==b?Blockly.Arduino.ORDER_EQUALITY:Blockly.Arduino.ORDER_RELATIONAL,c=Blockly.Arduino.valueToCode(this,"A",a)||"0",d=Blockly.Arduino.valueToCode(this,"B",a)||"0";return[c+" "+b+" "+d,a]};Blockly.Arduino.logic_compare.OPERATORS={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="};
Blockly.Arduino.logic_operation=function(){var b="AND"==this.getFieldValue("OP")?"&&":"||",a="&&"==b?Blockly.Arduino.ORDER_LOGICAL_AND:Blockly.Arduino.ORDER_LOGICAL_OR,c=Blockly.Arduino.valueToCode(this,"A",a)||"false",d=Blockly.Arduino.valueToCode(this,"B",a)||"false";return[c+" "+b+" "+d,a]};Blockly.Arduino.logic_equals_number=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX,a=Blockly.Arduino.valueToCode(this,"A",b)||"0",c=Blockly.Arduino.valueToCode(this,"B",b)||"0";return[a+" == "+c,b]};
Blockly.Arduino.logic_greater_number=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX,a=Blockly.Arduino.valueToCode(this,"A",b)||"0",c=Blockly.Arduino.valueToCode(this,"B",b)||"0";return[a+" > "+c,b]};Blockly.Arduino.logic_less_number=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX,a=Blockly.Arduino.valueToCode(this,"A",b)||"0",c=Blockly.Arduino.valueToCode(this,"B",b)||"0";return[a+" < "+c,b]};
Blockly.Arduino.logic_greater_equals_number=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX,a=Blockly.Arduino.valueToCode(this,"A",b)||"0",c=Blockly.Arduino.valueToCode(this,"B",b)||"0";return[a+" >= "+c,b]};Blockly.Arduino.logic_less_equals_number=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX,a=Blockly.Arduino.valueToCode(this,"A",b)||"0",c=Blockly.Arduino.valueToCode(this,"B",b)||"0";return[a+" <= "+c,b]};
Blockly.Arduino.logic_not_equals_number=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX,a=Blockly.Arduino.valueToCode(this,"A",b)||"0",c=Blockly.Arduino.valueToCode(this,"B",b)||"0";return[a+" != "+c,b]};Blockly.Arduino.logic_not_equals_boolean=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX,a=Blockly.Arduino.valueToCode(this,"A",b)||"0",c=Blockly.Arduino.valueToCode(this,"B",b)||"0";return[a+" != "+c,b]};
Blockly.Arduino.logic_equals_boolean=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX,a=Blockly.Arduino.valueToCode(this,"A",b)||"false",c=Blockly.Arduino.valueToCode(this,"B",b)||"false";return[a+" == "+c,b]};Blockly.Arduino.logic_and=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX,a=Blockly.Arduino.valueToCode(this,"A",b)||"0",c=Blockly.Arduino.valueToCode(this,"B",b)||"0";return[a+" && "+c,b]};
Blockly.Arduino.logic_or=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX,a=Blockly.Arduino.valueToCode(this,"A",b)||"false",c=Blockly.Arduino.valueToCode(this,"B",b)||"false";return[a+" || "+c,b]};Blockly.Arduino.logic_negate=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX;return["!"+(Blockly.Arduino.valueToCode(this,"BOOL",b)||"false"),b]};Blockly.Arduino.logic_boolean=function(){return["TRUE"==this.getFieldValue("BOOL")?"true":"false",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.logic_null=function(){return["NULL",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.math={};Blockly.Arduino.math_number=function(){var b=window.parseFloat(this.getFieldValue("NUM"));return[b,0>b?Blockly.Arduino.ORDER_UNARY_PREFIX:Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.math_arithmetic=function(){var b=this.getFieldValue("OP"),a=Blockly.Arduino.math_arithmetic.OPERATORS[b],b=a[0],a=a[1],c=Blockly.Arduino.valueToCode(this,"A",a)||"0",d=Blockly.Arduino.valueToCode(this,"B",a)||"0";return b?[c+b+d,a]:["Math.pow("+c+", "+d+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]};
Blockly.Arduino.math_add=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX,a=Blockly.Arduino.valueToCode(this,"A",b)||"0",c=Blockly.Arduino.valueToCode(this,"B",b)||"0";return[a+" + "+c,b]};Blockly.Arduino.math_subtract=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX,a=Blockly.Arduino.valueToCode(this,"A",b)||"0",c=Blockly.Arduino.valueToCode(this,"B",b)||"0";return[a+" - "+c,b]};
Blockly.Arduino.math_multiplication=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX,a=Blockly.Arduino.valueToCode(this,"A",b)||"0",c=Blockly.Arduino.valueToCode(this,"B",b)||"0";return[a+" * "+c,b]};Blockly.Arduino.math_division=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX,a=Blockly.Arduino.valueToCode(this,"A",b)||"0",c=Blockly.Arduino.valueToCode(this,"B",b)||"0";return[a+" / "+c,b]};
Blockly.Arduino.math_exponent=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX,a=Blockly.Arduino.valueToCode(this,"A",b)||"0",c=Blockly.Arduino.valueToCode(this,"B",b)||"0";return["pow("+a+" , "+c+")",b]};Blockly.Arduino.math_mod=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX,a=Blockly.Arduino.valueToCode(this,"A",b)||"0",c=Blockly.Arduino.valueToCode(this,"B",b)||"0";return[a+" % "+c,b]};
Blockly.Arduino.math_sqrt=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX;return["sqrt("+(Blockly.Arduino.valueToCode(this,"NUM",b)||"0")+")",b]};Blockly.Arduino.math_abs=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX;return["abs("+(Blockly.Arduino.valueToCode(this,"NUM",b)||"0")+")",b]};Blockly.Arduino.math_sin=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX;return["sin("+(Blockly.Arduino.valueToCode(this,"NUM",b)||"0")+")",b]};
Blockly.Arduino.math_cos=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX;return["cos("+(Blockly.Arduino.valueToCode(this,"NUM",b)||"0")+")",b]};Blockly.Arduino.math_tan=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX;return["tan("+(Blockly.Arduino.valueToCode(this,"NUM",b)||"0")+")",b]};Blockly.Arduino.math_random_max=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX;return["random("+(Blockly.Arduino.valueToCode(this,"NUM",b)||"0")+")",b]};
Blockly.Arduino.math_random_max_min=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX,a=Blockly.Arduino.valueToCode(this,"A",b)||"0",c=Blockly.Arduino.valueToCode(this,"B",b)||"0";return["random("+a+","+c+")",b]};Blockly.Arduino.math_min=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX;Blockly.Arduino.valueToCode(this,"A",b);Blockly.Arduino.valueToCode(this,"B",b);return["min("+argument+")",b]};
Blockly.Arduino.math_max=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX,a=Blockly.Arduino.valueToCode(this,"NUM",b)||"0",c=Blockly.Arduino.valueToCode(this,"NUM",b)||"0";return["max("+a+","+c+")",b]};Blockly.Arduino.math_constrain=function(){var b=Blockly.Arduino.ORDER_UNARY_PREFIX,a=Blockly.Arduino.valueToCode(this,"A",b)||"0",c=Blockly.Arduino.valueToCode(this,"B",b)||"0",d=Blockly.Arduino.valueToCode(this,"C",b)||"0";return["constrain("+a+","+c+","+d+")",b]};
Blockly.Arduino.math_arithmetic.OPERATORS={ADD:[" + ",Blockly.Arduino.ORDER_ADDITIVE],MINUS:[" - ",Blockly.Arduino.ORDER_ADDITIVE],MULTIPLY:[" * ",Blockly.Arduino.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",Blockly.Arduino.ORDER_MULTIPLICATIVE],POWER:[null,Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.variables={};Blockly.Arduino.variables_get=function(){return[Blockly.Arduino.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.variables_declare=function(){this.getFieldValue("TYPE");var b=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT)||"0",a=Blockly.Arduino.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);Blockly.Arduino.setups_["setup_var"+a]=a+" = "+b+";\n";return""};
Blockly.Arduino.variables_set=function(){var b=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT)||"0";return Blockly.Arduino.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE)+" = "+b+";\n"};Blockly.Arduino.constants_highlow=function(){return["HIGH"==this.getFieldValue("BOOL")?"HIGH":"LOW",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.constants_boolean=function(){return["TRUE"==this.getFieldValue("BOOL")?"true":"false",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.constants_high=function(){return["HIGH",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.constants_low=function(){return["LOW",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.constants_true=function(){return["true",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.constants_false=function(){return["false",Blockly.Arduino.ORDER_ATOMIC]};var varNames=[],varSize=[];function findVariable(b){for(var a=-1,c=0;c<varNames.length;c++)if(varNames[c]==b){a=c;break}return a}
Blockly.Arduino.variables_array_create=function(){var b=Blockly.Arduino.valueToCode(this,"variable",Blockly.Arduino.ORDER_ATOMIC).replace(/\s/g,""),a=Blockly.Arduino.valueToCode(this,"size",Blockly.Arduino.ORDER_ATOMIC);if(-1==findVariable(b))return varNames.push(b),varSize.push(a),Blockly.Arduino.definitions_["vars_array_"+b]="int vec__ABVAR_"+varNames.length+"_"+b+"["+a+"];\n",Blockly.Arduino.setups_["setup_array_"+b]="for (int i = 0; i < "+a+"; i++) {\n    vec__ABVAR_"+varNames.length+"_"+b+"[i] = 0;\n  }\n",
"";alert("ERROR: Invalid array name used.\nYou tried to create at least two arrays with the same name\n(Tried: "+b+")")};
Blockly.Arduino.variables_array_name=function(){var b=this.getFieldValue("varName").replace(/\s/g,""),a=Blockly.Arduino.valueToCode(this,"position",Blockly.Arduino.ORDER_ATOMIC),c=findVariable(b);-1==c?alert("ERROR: Invalid array name used.\nMake sure you have created an array variable by using the 'Create an integer array' block before you try to reference it.\n(Tried: "+b+")"):(1>a||varSize[c]<a)&&alert("ERROR: Invalid position used.\nMust be between 1 and "+varSize[c]+"\n(Tried: "+a+")");return["vec__ABVAR_"+
(c+1)+"_"+varNames[c]+"["+a+" - 1]",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.variables_digital=function(){return[this.getFieldValue("variable").replace(/\s/g,""),Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.variables_set_int_array_member=function(){var b=Blockly.Arduino.valueToCode(this,"variable",Blockly.Arduino.ORDER_ATOMIC).replace(/\s/g,""),a=Blockly.Arduino.valueToCode(this,"position",Blockly.Arduino.ORDER_ATOMIC),c=Blockly.Arduino.valueToCode(this,"value",Blockly.Arduino.ORDER_ATOMIC),d=findVariable(b);-1==d?alert("ERROR: Invalid array name used.\nMake sure you have created an array variable by using the 'Create an integer array' block before you try to reference it.\n(Tried: "+
b+")"):(1>a||varSize[d]<a)&&alert("ERROR: Invalid position used.\nMust be between 1 and "+varSize[d]+"\n(Tried: "+a+")");return"vec__ABVAR_"+(d+1)+"_"+b+"["+a+" - 1] = "+c+";\n"};
Blockly.Arduino.variables_set_integer=function(){var b=Blockly.Arduino.valueToCode(this,"variable",Blockly.Arduino.ORDER_ATOMIC).replace(/\s/g,""),a=Blockly.JavaScript.valueToCode(block,"value",Blockly.JavaScript.ORDER_ATOMIC);if(-1==findVariable(b))return varNames.push(b),varSize.push(-1),Blockly.Arduino.definitions_["vars_integer_"+b]="int _ABVAR_"+varNames.length+"_"+b+"["+value_size+"];\n",b="_ABVAR_"+varNames.length+"_"+b+" = "+a+";\n";alert("ERROR: Invalid array name used.\nYou tried to create at least two arrays with the same name\n(Tried: "+
b+")");return"..."};Blockly.Arduino.resetVariables=function(){varNames=[];varSize=[]};Blockly.Arduino.advancedCode={};
Blockly.Arduino.get_freq=function(b){var a="-1";switch(b){case '"C1"':a="33";break;case '"C1#"':a="35";break;case '"D1"':a="37";break;case '"D1#"':a="39";break;case '"E1"':a="41";break;case '"F1"':a="44";break;case '"F1#"':a="46";break;case '"G1"':a="49";break;case '"G1#"':a="52";break;case '"A1"':a="55";break;case '"A1#"':a="58";break;case '"B1"':a="62";break;case '"C2"':a="65";break;case '"C2#"':a="69";break;case '"D2"':a="73";break;case '"D2#"':a="78";break;case '"E2"':a="82";break;case '"F2"':a=
"87";break;case '"F2#"':a="93";break;case '"G2"':a="98";break;case '"G2#"':a="104";break;case '"A2"':a="110";break;case '"A2#"':a="117";break;case '"B2"':a="123";break;case '"C3"':a="131";break;case '"C3#"':a="139";break;case '"D3"':a="147";break;case '"D3#"':a="156";break;case '"E3"':a="165";break;case '"F3"':a="175";break;case '"F3#"':a="185";break;case '"G3"':a="196";break;case '"G3#"':a="208";break;case '"A3"':a="220";break;case '"A3#"':a="233";break;case '"B3"':a="247";break;case '"C"':a="262";
break;case '"C#"':a="277";break;case '"D"':a="294";break;case '"D#"':a="311";break;case '"E"':a="330";break;case '"F"':a="349";break;case '"F#"':a="370";break;case '"G"':a="392";break;case '"G#"':a="415";break;case '"A"':a="440";break;case '"A#"':a="466";break;case '"B"':a="494";break;case '"C4"':a="262";break;case '"C4#"':a="277";break;case '"D4"':a="294";break;case '"D4#"':a="311";break;case '"E4"':a="330";break;case '"F4"':a="349";break;case '"F4#"':a="370";break;case '"G4"':a="392";break;case '"G4#"':a=
"415";break;case '"A4"':a="440";break;case '"A4#"':a="466";break;case '"B4"':a="494";break;case '"C5"':a="523";break;case '"C5#"':a="554";break;case '"D5"':a="587";break;case '"D5#"':a="622";break;case '"E5"':a="659";break;case '"F5"':a="698";break;case '"F5#"':a="740";break;case '"G5"':a="784";break;case '"G5#"':a="831";break;case '"A5"':a="880";break;case '"A5#"':a="932";break;case '"B5"':a="988";break;case '"C6"':a="1047";break;case '"C6#"':a="1109";break;case '"D6"':a="1175";break;case '"D6#"':a=
"1245";break;case '"E6"':a="1319";break;case '"F6"':a="1397";break;case '"F6#"':a="1480";break;case '"G6"':a="1568";break;case '"G6#"':a="1661";break;case '"A6"':a="1760";break;case '"A6#"':a="1865";break;case '"B6"':a="1976";break;case '"C7"':a="2093";break;case '"C7#"':a="2217";break;case '"D7"':a="2349";break;case '"D7#"':a="2489";break;case '"E7"':a="2637";break;case '"F7"':a="2794";break;case '"F7#"':a="2960";break;case '"G7"':a="3136";break;case '"G7#"':a="3322";break;case '"A7"':a="3520";break;
case '"A7#"':a="3729";break;case '"B7"':a="3951";break;case '"C8"':a="4186";break;case '"C8#"':a="4435";break;case '"D8"':a="4699";break;case '"D8#"':a="4978";break;default:alert("unrecognized note used in block.\n\n\nHint: Please ask your teacher for a list of available note names.")}return a};Blockly.Arduino.play_note=function(){var b=Blockly.Arduino.valueToCode(this,"note",Blockly.Arduino.ORDER_ATOMIC),b=Blockly.Arduino.get_freq(b);return"tone(11, "+b+");\n"};
Blockly.Arduino.play_note_time=function(){var b=Blockly.Arduino.valueToCode(this,"note",Blockly.Arduino.ORDER_ATOMIC),a=Blockly.Arduino.valueToCode(this,"milliseconds",Blockly.Arduino.ORDER_ATOMIC),b=Blockly.Arduino.get_freq(b);""===a?(alert("Please add a time in milliseconds! Placed as 0 for now."),a="0"):null;return"tone(11, "+b+", "+a+");\n"};
Blockly.Arduino.button_pressed=function(){var b;switch(Blockly.Arduino.valueToCode(this,"button",Blockly.Arduino.ORDER_ATOMIC)){case "1":Blockly.Arduino.setups_.setup_pin_6="pinMode(6, INPUT);";b=6;break;case "2":Blockly.Arduino.setups_.setup_pin_8="pinMode(8, INPUT);";b=8;break;case "3":Blockly.Arduino.setups_.setup_pin_10="pinMode(10, INPUT);";b=10;break;case "4":Blockly.Arduino.setups_.setup_pin_12="pinMode(12, INPUT);";b=12;break;default:alert("invalid button used in block.\n\n\nHint: Valid button numbers are 1-4.")}return["digitalRead("+
b+")",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.play_frequency=function(){var b=Blockly.Arduino.valueToCode(this,"frequency",Blockly.Arduino.ORDER_ATOMIC);""===b?(alert("Please add a frequency! Placed as 0 for now."),b="0"):null;return"tone(11, "+b+");\n"};
Blockly.Arduino.play_frequency_time=function(){var b=Blockly.Arduino.valueToCode(this,"frequency",Blockly.Arduino.ORDER_ATOMIC),a=Blockly.Arduino.valueToCode(this,"milliseconds",Blockly.Arduino.ORDER_ATOMIC);""===b?(alert("Please add a time in frequency! Placed as 0 for now."),b="0"):null;""===a?(alert("Please add a time in milliseconds! Placed as 0 for now."),a="0"):null;return"tone(11, "+b+", "+a+");\n"};Blockly.Arduino.no_tone=function(){return"noTone(11);\n"};
Blockly.Arduino.turn_led_1_on=function(){Blockly.Arduino.setups_.setup_red_led="pinMode(5, OUTPUT);\n";return"digitalWrite(5, HIGH);\n"};Blockly.Arduino.turn_led_1_off=function(){Blockly.Arduino.setups_.setup_red_led="pinMode(5, OUTPUT);\n";return"digitalWrite(5, LOW);\n"};Blockly.Arduino.turn_led_2_on=function(){Blockly.Arduino.setups_.setup_orange_led="pinMode(7, OUTPUT);\n";return"digitalWrite(7, HIGH);\n"};
Blockly.Arduino.turn_led_2_off=function(){Blockly.Arduino.setups_.setup_orange_led="pinMode(7, OUTPUT);\n";return"digitalWrite(7, LOW);\n"};Blockly.Arduino.turn_led_3_on=function(){Blockly.Arduino.setups_.setup_yellow_led="pinMode(9, OUTPUT);\n";return"digitalWrite(9, HIGH);\n"};Blockly.Arduino.turn_led_3_off=function(){Blockly.Arduino.setups_.setup_yellow_led="pinMode(9, OUTPUT);\n";return"digitalWrite(9, LOW);\n"};
Blockly.Arduino.turn_led_4_on=function(){Blockly.Arduino.setups_.setup_green_led="pinMode(13, OUTPUT);\n";return"digitalWrite(13, HIGH);\n"};Blockly.Arduino.turn_led_4_off=function(){Blockly.Arduino.setups_.setup_green_led="pinMode(13, OUTPUT);\n";return"digitalWrite(13, LOW);\n"};Blockly.Arduino.set_up_keyboard=function(){Blockly.Arduino.definitions_.var_keysDown_read="boolean keysDown[36];\n";return""};
Blockly.Arduino.update_keyboard=function(){Blockly.Arduino.definitions_.vars_ecs_reads="int ECSindex;\nint ECSnumAvailable;\nint ECSiteration;\n";return"ECSnumAvailable = Serial.available();\nchar buffer[ECSnumAvailable];\nSerial.readBytes(buffer, ECSnumAvailable);\nfor (ECSiteration = 0; ECSiteration < ( ECSnumAvailable ); ++ECSiteration)\n{\n\tECSindex = buffer[ECSiteration];\n\tkeysDown[ECSindex] = !keysDown[ECSindex];\n}\n"};
Blockly.Arduino.key_pressed=function(){var b=Blockly.Arduino.valueToCode(this,"key",Blockly.Arduino.ORDER_ATOMIC),a;3==b.length&&(b=b.charAt(1),47<b.charCodeAt()&&58>b.charCodeAt()?a=b.charCodeAt()-48:96<b.charCodeAt()&&123>b.charCodeAt()&&(a=b.charCodeAt()-97+10));null==a&&alert("unrecognized key used in block.\n\n\nHiny: Valid keys are a-z and 0-9.");return["keysDown["+a+"]",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.get_distance=function(){Blockly.Arduino.definitions_.func_smoothDistance="int smoothDistance()\n{\n  int count = 0;\n  long avg = 0;\n  int dist = 0;\n  while (count < 4) {\n    dist = getDistance();    avg = (avg + dist)/2;\n    count = count + 1;\n  }\n  if (count == 4) {\n    count = 0;\n  }\n  Serial.println(avg, DEC);\n  return (int)avg;\n}\n";Blockly.Arduino.definitions_["func_getDistance()"]="int getDistance()\n{\n unsigned long start = micros();\n int CYCLES = 4;\n int DELAY_PING = 25;\n int timeout = 16000;\n int T1OUT = 0x10;\n \n for (int ii = 0; ii < CYCLES; ii++) {\n   digitalWrite(2, HIGH);\n   digitalWrite(3, LOW);\n   delayMicroseconds(DELAY_PING);\n   digitalWrite(2, LOW);\n   digitalWrite(3, HIGH);\n   delayMicroseconds(DELAY_PING);\n }\n \n delayMicroseconds(200);\n while((PIND & T1OUT) != 0 && timeout > 0) {\n   timeout--;\n   delayMicroseconds(1);\n }\n unsigned long end = micros();\n unsigned long time;\n if (end > start) {\n   time = end - start;\n }\n else {\n   time = (end + ~start) - (start + ~start);\n }\n\n delayMicroseconds(400000);\n return ((int) time);\n}\n";
Blockly.Arduino.setups_.setup_dist_1="Serial.begin(9600);\n";Blockly.Arduino.setups_.setup_dist_2="pinMode(3, OUTPUT);\n";Blockly.Arduino.setups_.setup_dist_3="pinMode(2, OUTPUT);\n";return["smoothDistance()",Blockly.Arduino.ORDER_ATOMIC]};